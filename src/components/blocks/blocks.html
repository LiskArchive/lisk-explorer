<!--
/*
 * LiskHQ/lisk-explorer
 * Copyright Â© 2018 Lisk Foundation
 *
 * See the LICENSE file at the top-level directory of this distribution
 * for licensing information.
 *
 * Unless otherwise agreed in a custom licensing agreement with the Lisk Foundation,
 * no part of this software, including this file, may be copied, modified,
 * propagated, or distributed except according to the terms contained in the
 * LICENSE file.
 *
 * Removal or modification of this copyright notice is prohibited.
 *
 */
-->
<section>
    <div class="row">
        <div class="col-xs-12 col-md-12">
            <div class="page-header">
                <h1>Blocks <small data-ng-if="vm.blocks.length > 1">{{vm.blocks[0].height}} &#8594; {{vm.blocks[vm.blocks.length - 1].height}}</small></h1>
            </div>
            <div class="table-responsive">
                <table class="table table-hover table-striped">
                    <thead>
                        <tr>
                            <th class="left-padding-s left-padding-m left-padding-l double hidden-xs">Id</th>
                            <th class="left-padding-xs">
                                <span class="pull-right hidden-xs">Height</span>
                                <span class="pull-left visible-xs">Height</span>
                            </th>
                            <th class="text-right hidden-xs hidden-sm">Timestamp</th>
                            <th class="right-padding-s text-right">
                                <span class="hidden-xs hidden-sm">Transactions</span>
                                <span class="visible-xs visible-sm">Txs.</span>
                            </th>
                            <th class="right-padding-xs right-padding-s text-right">Generated by</th>
                            <th class="text-right hidden-xs">Amount</th>
                            <th class="right-padding-m right-padding-l double text-right">Forged</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr data-ng-if="loading">
                            <td class="left-padding-xs left-padding-s left-padding-m left-padding-l double" colspan="7">Waiting for blocks <i class="fa fa-spinner fa-spin"></i></td>
                        </tr>
                        <tr data-ng-repeat='b in vm.blocks track by $index'>
                            <td class="left-padding-s left-padding-m left-padding-l double hidden-xs"><a class="ellipsis" href="/block/{{b.id}}">{{b.id}}</a></td>
                            <td class="left-padding-xs">
                                <span class="ellipsis text-right hidden-xs">{{b.height}}</span>
                                <a class="ellipsis pull-left visible-xs" href="/block/{{b.id}}">{{b.height}}</a>
                            </td>
                            <td class="text-right hidden-xs hidden-sm"><span class="ellipsis">{{b.timestamp | timestamp}}</span></td>
                            <td class="right-padding-s text-right">{{b.transactionsCount}}</td>
                            <td class="right-padding-xs right-padding-s text-right">
                                <a class="hidden-xs" href="/address/{{b.generator}}">{{b.delegate.username || b.generator}}</a>
                                <a class="visible-xs" href="/address/{{b.generator}}">{{b.delegate.username || b.generator | middleEllipsis:10}}</a>
                            </td>
                            <td class="text-right hidden-xs">{{b.totalAmount | currency:$root.currency:$root.decimalPlaces}} {{$root.currency.symbol}}</td>
                            <td class="right-padding-m right-padding-l double text-right">{{b.totalForged | currencyFee:$root.currency:$root.decimalPlaces}} {{$root.currency.symbol}}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="btn-group btn-group-justified paginator" role="group" aria-label="Next Previous Blocks" data-ng-if="vm.pagination && (vm.pagination.more || vm.pagination.before)">
                <div class="btn-group" role="group">
                    <a class="btn btn-default less-button bordered-button" data-ng-class="{'disabled': !vm.pagination.before}" data-ng-disabled="!vm.pagination.before" href="/blocks/{{vm.pagination.previousPage}}">Previous</a>
                </div>
                <div class="btn-group" role="group">
                    <a class="btn btn-default more-button bordered-button" data-ng-class="{'disabled': !(vm.pagination.more && vm.pagination.nextPage != 0)}" data-ng-disabled="!(vm.pagination.more && vm.pagination.nextPage != 0)" href="/blocks/{{vm.pagination.nextPage}}">Next</a>
                </div>
            </div>
        </div>
    </div>
    <h2 class="text-center text-muted" data-ng-if="!loading && !vm.blocks.length">No blocks yet.</h2>
</section>
